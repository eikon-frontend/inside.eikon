(()=>{"use strict";const e=window.wp.blocks,t=window.React,l=window.wp.blockEditor,a=window.wp.data;window.wp.i18n;const s=(0,a.withSelect)((e=>{const{getEntityRecords:t}=e("core");return{posts:t("postType","project",{per_page:-1}),years:t("taxonomy","year",{per_page:-1})}}))((function({attributes:e,setAttributes:s,posts:r,years:n}){const{editPost:c}=(0,a.useDispatch)("core/editor"),[i,o]=(0,t.useState)(e.selectedPosts||[]),[d,u]=(0,t.useState)(""),[m,p]=(0,t.useState)(e.selectedOptions||[]),v=r?r.map((e=>({value:e.id,label:e.title.rendered,yearId:e.acf.year}))):[];return(0,t.useEffect)((()=>{s({selectedPosts:i,selectedOptions:m}),c({meta:{selectedPosts:i}})}),[i,m]),(0,t.createElement)("div",{...(0,l.useBlockProps)()},(0,t.createElement)("div",null,(0,t.createElement)("label",null,"Year:",(0,t.createElement)("select",{value:d,onChange:e=>{u(e.target.value)}},(0,t.createElement)("option",{value:""}),n&&n.map((e=>(0,t.createElement)("option",{key:e.id,value:e.id},e.name)))))),(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",gap:"5px"}},(0,t.createElement)("div",{style:{width:"50%"}},(0,t.createElement)("h2",null,"Project"),(0,t.createElement)("div",{className:"list-projects list-projects-available"},v.filter((e=>""==d||e.yearId==d)).filter((e=>!m.map((e=>e.value)).includes(e.value))).map(((e,l)=>(0,t.createElement)("button",{key:e.value,value:e.value,className:"project",onClick:()=>(e=>{const t=v.find((t=>t.value===e));if(t){p((e=>[...e,t]));const e=r.find((e=>e.id===Number(t.value)));e&&o((t=>[...t,e]))}})(e.value),dangerouslySetInnerHTML:{__html:e.label}}))))),(0,t.createElement)("div",{style:{width:"50%",overflow:"scroll"}},(0,t.createElement)("h2",null,"Selected project"),(0,t.createElement)("div",{className:"list-projects list-projects-selected"},i.map(((e,l)=>(0,t.createElement)("button",{key:e.id,onClick:()=>(e=>{const t=i.filter((t=>t.id!==e));o(t);const l=m.filter((t=>t.value!==e));p(l)})(e.id)},(0,t.createElement)("span",{dangerouslySetInnerHTML:{__html:e.title.rendered}}),(0,t.createElement)("img",{className:"image-thumbnail",src:e.featured_image_src,alt:e.title.rendered}))))))))})),r=JSON.parse('{"u2":"eikonblocks/projects"}');(0,e.registerBlockType)(r.u2,{edit:s,save:function({attributes:e}){const{selectedPosts:a}=e;return(0,t.createElement)("div",{...l.useBlockProps.save()},a.map((e=>(0,t.createElement)("div",{key:e.id},(0,t.createElement)(l.RichText.Content,{tagName:"h2",value:e.title.rendered}),e.featured_image_src&&(0,t.createElement)("img",{src:e.featured_image_src,alt:e.title.rendered})))))}})})();