(()=>{"use strict";const e=window.wp.blocks,t=window.React,a=window.wp.data,s=window.wp.blockEditor,o=window.wp.components,n=window.wp.element,l=(0,a.withSelect)((e=>{const t=[{slug:"post",name:"Article"},{slug:"project",name:"Project"}],{getTaxonomies:a,getEntityRecords:s}=e("core"),o={},n={};return t.forEach((e=>{const t=e.slug,l=a({type:t})||[];o[t]=l,n[t]={},l.forEach((e=>{const a=e.slug,o=s("taxonomy",a,{per_page:-1})||[];n[t][a]=o}))})),{availableCPTs:t,availableTaxonomies:o,availableTerms:n}}))((function(e){const{attributes:a,setAttributes:l,availableCPTs:c,availableTaxonomies:i,availableTerms:r}=e,{selectedCPTsData:m={}}=a,[d,u]=(0,n.useState)([]),[g,p]=(0,n.useState)({}),[b,E]=(0,n.useState)({});return(0,n.useEffect)((()=>{u(c.map((e=>e.slug)))}),[c]),(0,n.useEffect)((()=>{const e={};Object.keys(m).forEach((t=>{e[t]=(i[t]||[]).map((e=>e.slug))})),p(e)}),[i,m]),(0,n.useEffect)((()=>{const e={};Object.entries(m).forEach((([t,a])=>{Object.keys(a.taxonomies).forEach((a=>{e[`${t}-${a}`]=(r[t][a]||[]).map((e=>e.slug))}))})),E(e)}),[r,m]),(0,t.createElement)("div",{...(0,s.useBlockProps)()},(0,t.createElement)("div",{className:"eikonblock-title"},"eikonblock // mixed posts"),(0,t.createElement)("div",null,(0,t.createElement)(o.FormTokenField,{label:"Select Post Types:",value:Object.keys(m),suggestions:d,onChange:e=>{const t={};e.forEach((e=>{t[e]=m[e]||{taxonomies:{}}})),l({selectedCPTsData:t})}})),Object.entries(m).map((([e,a])=>(0,t.createElement)("div",{className:"cpt-card",key:e,style:{backgroundColor:"white",borderRadius:"8px",padding:"16px",marginBottom:"16px"}},(0,t.createElement)(n.Fragment,null,(0,t.createElement)("div",null,(0,t.createElement)("strong",null,c.find((t=>t.slug===e))?.name)),(0,t.createElement)(o.FormTokenField,{label:"Select Taxonomies:",value:Object.keys(a.taxonomies),suggestions:g[e]||[],onChange:t=>{const s={...m};s[e].taxonomies={},t.forEach((t=>{s[e].taxonomies[t]=a.taxonomies[t]||[]})),l({selectedCPTsData:s})}}),Object.entries(a.taxonomies).map((([a,s])=>(0,t.createElement)(n.Fragment,{key:a},(0,t.createElement)("div",null,(0,t.createElement)("strong",null,i[e]?.find((e=>e.slug===a))?.name)),(0,t.createElement)(o.FormTokenField,{label:`Select Terms for ${i[e]?.find((e=>e.slug===a))?.name}:`,value:s,suggestions:b[`${e}-${a}`]||[],onChange:t=>((e,t,a)=>{const s={...m};s[e].taxonomies||(s[e].taxonomies={}),s[e].taxonomies[t]=a,l({selectedCPTsData:s})})(e,a,t)})))))))),(0,t.createElement)("div",{className:"mixed-posts","data-cpt":JSON.stringify(m)}))})),c=JSON.parse('{"UU":"eikonblocks/mixedposts"}'),i=wp.element.createElement;i("svg",{width:24,height:24},i("path",{d:"M11 13H3V3h8v10Zm0 8H3v-6h8v6Zm2 0h8V11h-8v10Zm0-12V3h8v6h-8Z"})),(0,e.registerBlockType)(c.UU,{edit:l,save:function({attributes:e}){const{selectedCPTsData:a}=e,o=JSON.stringify(a);return(0,t.createElement)("div",{...s.useBlockProps.save(),className:"wp-block-eikonblocks-mixed","data-cpt":o})}})})();